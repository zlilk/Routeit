<!DOCTYPE html>
<html ng-app="suggestedRoute">
    <head>
        <meta charset="utf-8">
        <meta name="google-signin-client_id" content="296256466166-pdh58rh53nihcc5tfh184vmautajqsup.apps.googleusercontent.com">
        <title>Suggested Route</title>
        <link href='https://fonts.googleapis.com/css?family=Alef' rel='stylesheet' type='text/css'>
        <link rel="stylesheet" type="text/css" href="css/bootstrap.min.css">
        <link rel="stylesheet" type="text/css" href="css/bootstrap-theme.min.css">
        <link rel="stylesheet" href="css/style.css">
        <script src="https://apis.google.com/js/platform.js" async defer></script>   
        <style>
          #map {
            height: 200px;
            width: 500px;
          }
        </style>
    </head>
    <body>
        <nav> 
            <a id = "personalProfile" href="http://localhost:8080/userprofile.html"> personalProfile </a>
            <a id = "dailyRoute" href="http://localhost:8080/dailyRoute.html"> dailyRoute </a>
            <a id = "detailedPlan" href="http://localhost:8080/detailedPlan.html"> detailedPlan </a> 
            <div class = "clear"> </div>
        </nav>
        <header id="suggestedHeader"> 
        	<a href="http://localhost:8080/routeform.html"> < </a>
            <h1> המסלול המוצע </h1>
        </header>
        <main id="sugMain" ng-controller = "SuggestedController">
            <section id="suggestedMap">
                <div id="map"></div>
            </section>
            <section id="routeOverview">
            	<span> אזור </span> {{area}} <br>
            	<span> נקודת התחלה: </span> {{tripStartPt}} <br>
            	<span> נקודת סיום: </span> {{tripEndPt}} <br>
            	<span> מספר ימים: </span> {{tripDaysNum}} <br>
                <span> מספר ק"מ ליום: </span> {{tripDayKm}} <br>
            	<span> מספר ק"מ כולל: </span> {{tripKm}} <br>
            	<span> רמת קושי: </span> {{tripDiff}} <br>
            	אופי הטיול: <span ng-repeat = "type in tripType"> {{type}} </span> <br>
            	אתרים בדרך: <span ng-repeat = "site in tripSites"> {{site}} </span>
            	<button ng-click="addRoute()"> + </button>
            	<button ng-click="showHide()"> ^ </button>
                <br><br>
            	<section id="dailySecs" class = "hidden"> </section>
            </section>
        </main>
        <footer> 
            <div class="g-signin2 hidden" id = "signInRoute" data-onsuccess="onSignIn"></div>
            <div class = "clear"> </div>
        </footer>
        <script>
            function initMap() {
                var coords = JSON.parse(localStorage.getItem("suggestedCoords"));
                var centerCoord = coords[parseInt(coords.length/2)];
                var map = new google.maps.Map(document.getElementById('map'), {
                  zoom: 12,
                  center: centerCoord, //{lat: 33.240884, lng: 35.575751},
                  mapTypeId: 'terrain'
                });
                var flightPath = new google.maps.Polyline({
                  path: coords,
                  geodesic: true,
                  strokeColor: '#FF0000',
                  strokeOpacity: 1.0,
                  strokeWeight: 2
                });
                flightPath.setMap(map);
            }
            function signOut() {
                var auth2 = gapi.auth2.getAuthInstance();
                auth2.signOut().then(function () {
                    console.log('User signed out.');
                });
                window.location.assign("");
            }
        </script>
        <script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyClX7NRDum6_i6RO1SXeH9_REWSulwtA5c&callback=initMap">
        </script>
        <script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.0/jquery.min.js"></script>
        <script src="js/lib/angular/angular.min.js"></script>
        <script src="js/suggested.js"></script>
    </body>
 </html>